(() => {
  var yt = Object.create, N = Object.defineProperty; var gt = Object.getOwnPropertyDescriptor; var bt = Object.getOwnPropertyNames; var wt = Object.getPrototypeOf, vt = Object.prototype.hasOwnProperty; var xt = t => N(t, "__esModule", { value: !0 }); var c = (t, e) => () => (e || t((e = { exports: {} }).exports, e), e.exports); var Ct = (t, e, r) => { if (e && typeof e == "object" || typeof e == "function") for (let s of bt(e)) !vt.call(t, s) && s !== "default" && N(t, s, { get: () => e[s], enumerable: !(r = gt(e, s)) || r.enumerable }); return t }, se = t => Ct(xt(N(t != null ? yt(wt(t)) : {}, "default", t && t.__esModule && "default" in t ? { get: () => t.default, enumerable: !0 } : { value: t, enumerable: !0 })), t); var F = c((hr, ne) => { "use strict"; ne.exports = function (e, r) { return function () { for (var n = new Array(arguments.length), a = 0; a < n.length; a++)n[a] = arguments[a]; return e.apply(r, n) } } }); var d = c((mr, oe) => { "use strict"; var Et = F(), w = Object.prototype.toString; function D(t) { return w.call(t) === "[object Array]" } function j(t) { return typeof t == "undefined" } function qt(t) { return t !== null && !j(t) && t.constructor !== null && !j(t.constructor) && typeof t.constructor.isBuffer == "function" && t.constructor.isBuffer(t) } function Tt(t) { return w.call(t) === "[object ArrayBuffer]" } function At(t) { return typeof FormData != "undefined" && t instanceof FormData } function Rt(t) { var e; return typeof ArrayBuffer != "undefined" && ArrayBuffer.isView ? e = ArrayBuffer.isView(t) : e = t && t.buffer && t.buffer instanceof ArrayBuffer, e } function St(t) { return typeof t == "string" } function kt(t) { return typeof t == "number" } function ae(t) { return t !== null && typeof t == "object" } function A(t) { if (w.call(t) !== "[object Object]") return !1; var e = Object.getPrototypeOf(t); return e === null || e === Object.prototype } function Lt(t) { return w.call(t) === "[object Date]" } function Ot(t) { return w.call(t) === "[object File]" } function Ut(t) { return w.call(t) === "[object Blob]" } function ie(t) { return w.call(t) === "[object Function]" } function Pt(t) { return ae(t) && ie(t.pipe) } function Bt(t) { return typeof URLSearchParams != "undefined" && t instanceof URLSearchParams } function zt(t) { return t.replace(/^\s*/, "").replace(/\s*$/, "") } function Nt() { return typeof navigator != "undefined" && (navigator.product === "ReactNative" || navigator.product === "NativeScript" || navigator.product === "NS") ? !1 : typeof window != "undefined" && typeof document != "undefined" } function M(t, e) { if (!(t === null || typeof t == "undefined")) if (typeof t != "object" && (t = [t]), D(t)) for (var r = 0, s = t.length; r < s; r++)e.call(null, t[r], r, t); else for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && e.call(null, t[n], n, t) } function _() { var t = {}; function e(n, a) { A(t[a]) && A(n) ? t[a] = _(t[a], n) : A(n) ? t[a] = _({}, n) : D(n) ? t[a] = n.slice() : t[a] = n } for (var r = 0, s = arguments.length; r < s; r++)M(arguments[r], e); return t } function Ft(t, e, r) { return M(e, function (n, a) { r && typeof n == "function" ? t[a] = Et(n, r) : t[a] = n }), t } function Dt(t) { return t.charCodeAt(0) === 65279 && (t = t.slice(1)), t } oe.exports = { isArray: D, isArrayBuffer: Tt, isBuffer: qt, isFormData: At, isArrayBufferView: Rt, isString: St, isNumber: kt, isObject: ae, isPlainObject: A, isUndefined: j, isDate: Lt, isFile: Ot, isBlob: Ut, isFunction: ie, isStream: Pt, isURLSearchParams: Bt, isStandardBrowserEnv: Nt, forEach: M, merge: _, extend: Ft, trim: zt, stripBOM: Dt } }); var $ = c((yr, le) => { "use strict"; var x = d(); function ue(t) { return encodeURIComponent(t).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+").replace(/%5B/gi, "[").replace(/%5D/gi, "]") } le.exports = function (e, r, s) { if (!r) return e; var n; if (s) n = s(r); else if (x.isURLSearchParams(r)) n = r.toString(); else { var a = []; x.forEach(r, function (l, g) { l === null || typeof l == "undefined" || (x.isArray(l) ? g = g + "[]" : l = [l], x.forEach(l, function (m) { x.isDate(m) ? m = m.toISOString() : x.isObject(m) && (m = JSON.stringify(m)), a.push(ue(g) + "=" + ue(m)) })) }), n = a.join("&") } if (n) { var u = e.indexOf("#"); u !== -1 && (e = e.slice(0, u)), e += (e.indexOf("?") === -1 ? "?" : "&") + n } return e } }); var pe = c((gr, ce) => { "use strict"; var jt = d(); function R() { this.handlers = [] } R.prototype.use = function (e, r) { return this.handlers.push({ fulfilled: e, rejected: r }), this.handlers.length - 1 }; R.prototype.eject = function (e) { this.handlers[e] && (this.handlers[e] = null) }; R.prototype.forEach = function (e) { jt.forEach(this.handlers, function (s) { s !== null && e(s) }) }; ce.exports = R }); var de = c((br, fe) => { "use strict"; var Mt = d(); fe.exports = function (e, r, s) { return Mt.forEach(s, function (a) { e = a(e, r) }), e } }); var I = c((wr, he) => { "use strict"; he.exports = function (e) { return !!(e && e.__CANCEL__) } }); var ye = c((vr, me) => { "use strict"; var _t = d(); me.exports = function (e, r) { _t.forEach(e, function (n, a) { a !== r && a.toUpperCase() === r.toUpperCase() && (e[r] = n, delete e[a]) }) } }); var be = c((xr, ge) => { "use strict"; ge.exports = function (e, r, s, n, a) { return e.config = r, s && (e.code = s), e.request = n, e.response = a, e.isAxiosError = !0, e.toJSON = function () { return { message: this.message, name: this.name, description: this.description, number: this.number, fileName: this.fileName, lineNumber: this.lineNumber, columnNumber: this.columnNumber, stack: this.stack, config: this.config, code: this.code } }, e } }); var H = c((Cr, we) => { "use strict"; var $t = be(); we.exports = function (e, r, s, n, a) { var u = new Error(e); return $t(u, r, s, n, a) } }); var xe = c((Er, ve) => { "use strict"; var It = H(); ve.exports = function (e, r, s) { var n = s.config.validateStatus; !s.status || !n || n(s.status) ? e(s) : r(It("Request failed with status code " + s.status, s.config, null, s.request, s)) } }); var Ee = c((qr, Ce) => { "use strict"; var S = d(); Ce.exports = S.isStandardBrowserEnv() ? function () { return { write: function (r, s, n, a, u, i) { var l = []; l.push(r + "=" + encodeURIComponent(s)), S.isNumber(n) && l.push("expires=" + new Date(n).toGMTString()), S.isString(a) && l.push("path=" + a), S.isString(u) && l.push("domain=" + u), i === !0 && l.push("secure"), document.cookie = l.join("; ") }, read: function (r) { var s = document.cookie.match(new RegExp("(^|;\\s*)(" + r + ")=([^;]*)")); return s ? decodeURIComponent(s[3]) : null }, remove: function (r) { this.write(r, "", Date.now() - 864e5) } } }() : function () { return { write: function () { }, read: function () { return null }, remove: function () { } } }() }); var Te = c((Tr, qe) => { "use strict"; qe.exports = function (e) { return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e) } }); var Re = c((Ar, Ae) => { "use strict"; Ae.exports = function (e, r) { return r ? e.replace(/\/+$/, "") + "/" + r.replace(/^\/+/, "") : e } }); var ke = c((Rr, Se) => { "use strict"; var Ht = Te(), Wt = Re(); Se.exports = function (e, r) { return e && !Ht(r) ? Wt(e, r) : r } }); var Oe = c((Sr, Le) => {
    "use strict"; var W = d(), Kt = ["age", "authorization", "content-length", "content-type", "etag", "expires", "from", "host", "if-modified-since", "if-unmodified-since", "last-modified", "location", "max-forwards", "proxy-authorization", "referer", "retry-after", "user-agent"]; Le.exports = function (e) {
      var r = {}, s, n, a; return e && W.forEach(e.split(`
`), function (i) { if (a = i.indexOf(":"), s = W.trim(i.substr(0, a)).toLowerCase(), n = W.trim(i.substr(a + 1)), s) { if (r[s] && Kt.indexOf(s) >= 0) return; s === "set-cookie" ? r[s] = (r[s] ? r[s] : []).concat([n]) : r[s] = r[s] ? r[s] + ", " + n : n } }), r
    }
  }); var Be = c((kr, Pe) => { "use strict"; var Ue = d(); Pe.exports = Ue.isStandardBrowserEnv() ? function () { var e = /(msie|trident)/i.test(navigator.userAgent), r = document.createElement("a"), s; function n(a) { var u = a; return e && (r.setAttribute("href", u), u = r.href), r.setAttribute("href", u), { href: r.href, protocol: r.protocol ? r.protocol.replace(/:$/, "") : "", host: r.host, search: r.search ? r.search.replace(/^\?/, "") : "", hash: r.hash ? r.hash.replace(/^#/, "") : "", hostname: r.hostname, port: r.port, pathname: r.pathname.charAt(0) === "/" ? r.pathname : "/" + r.pathname } } return s = n(window.location.href), function (u) { var i = Ue.isString(u) ? n(u) : u; return i.protocol === s.protocol && i.host === s.host } }() : function () { return function () { return !0 } }() }); var X = c((Lr, ze) => { "use strict"; var k = d(), Xt = xe(), Vt = Ee(), Jt = $(), Gt = ke(), Qt = Oe(), Zt = Be(), K = H(); ze.exports = function (e) { return new Promise(function (s, n) { var a = e.data, u = e.headers; k.isFormData(a) && delete u["Content-Type"]; var i = new XMLHttpRequest; if (e.auth) { var l = e.auth.username || "", g = e.auth.password ? unescape(encodeURIComponent(e.auth.password)) : ""; u.Authorization = "Basic " + btoa(l + ":" + g) } var E = Gt(e.baseURL, e.url); if (i.open(e.method.toUpperCase(), Jt(E, e.params, e.paramsSerializer), !0), i.timeout = e.timeout, i.onreadystatechange = function () { if (!(!i || i.readyState !== 4) && !(i.status === 0 && !(i.responseURL && i.responseURL.indexOf("file:") === 0))) { var o = "getAllResponseHeaders" in i ? Qt(i.getAllResponseHeaders()) : null, q = !e.responseType || e.responseType === "text" ? i.responseText : i.response, mt = { data: q, status: i.status, statusText: i.statusText, headers: o, config: e, request: i }; Xt(s, n, mt), i = null } }, i.onabort = function () { !i || (n(K("Request aborted", e, "ECONNABORTED", i)), i = null) }, i.onerror = function () { n(K("Network Error", e, null, i)), i = null }, i.ontimeout = function () { var o = "timeout of " + e.timeout + "ms exceeded"; e.timeoutErrorMessage && (o = e.timeoutErrorMessage), n(K(o, e, "ECONNABORTED", i)), i = null }, k.isStandardBrowserEnv()) { var m = (e.withCredentials || Zt(E)) && e.xsrfCookieName ? Vt.read(e.xsrfCookieName) : void 0; m && (u[e.xsrfHeaderName] = m) } if ("setRequestHeader" in i && k.forEach(u, function (o, q) { typeof a == "undefined" && q.toLowerCase() === "content-type" ? delete u[q] : i.setRequestHeader(q, o) }), k.isUndefined(e.withCredentials) || (i.withCredentials = !!e.withCredentials), e.responseType) try { i.responseType = e.responseType } catch (p) { if (e.responseType !== "json") throw p } typeof e.onDownloadProgress == "function" && i.addEventListener("progress", e.onDownloadProgress), typeof e.onUploadProgress == "function" && i.upload && i.upload.addEventListener("progress", e.onUploadProgress), e.cancelToken && e.cancelToken.promise.then(function (o) { !i || (i.abort(), n(o), i = null) }), a || (a = null), i.send(a) }) } }); var V = c((Or, De) => { "use strict"; var h = d(), Ne = ye(), Yt = { "Content-Type": "application/x-www-form-urlencoded" }; function Fe(t, e) { !h.isUndefined(t) && h.isUndefined(t["Content-Type"]) && (t["Content-Type"] = e) } function er() { var t; return typeof XMLHttpRequest != "undefined" ? t = X() : typeof process != "undefined" && Object.prototype.toString.call(process) === "[object process]" && (t = X()), t } var L = { adapter: er(), transformRequest: [function (e, r) { return Ne(r, "Accept"), Ne(r, "Content-Type"), h.isFormData(e) || h.isArrayBuffer(e) || h.isBuffer(e) || h.isStream(e) || h.isFile(e) || h.isBlob(e) ? e : h.isArrayBufferView(e) ? e.buffer : h.isURLSearchParams(e) ? (Fe(r, "application/x-www-form-urlencoded;charset=utf-8"), e.toString()) : h.isObject(e) ? (Fe(r, "application/json;charset=utf-8"), JSON.stringify(e)) : e }], transformResponse: [function (e) { if (typeof e == "string") try { e = JSON.parse(e) } catch (r) { } return e }], timeout: 0, xsrfCookieName: "XSRF-TOKEN", xsrfHeaderName: "X-XSRF-TOKEN", maxContentLength: -1, maxBodyLength: -1, validateStatus: function (e) { return e >= 200 && e < 300 } }; L.headers = { common: { Accept: "application/json, text/plain, */*" } }; h.forEach(["delete", "get", "head"], function (e) { L.headers[e] = {} }); h.forEach(["post", "put", "patch"], function (e) { L.headers[e] = h.merge(Yt) }); De.exports = L }); var _e = c((Ur, Me) => { "use strict"; var je = d(), J = de(), tr = I(), rr = V(); function G(t) { t.cancelToken && t.cancelToken.throwIfRequested() } Me.exports = function (e) { G(e), e.headers = e.headers || {}, e.data = J(e.data, e.headers, e.transformRequest), e.headers = je.merge(e.headers.common || {}, e.headers[e.method] || {}, e.headers), je.forEach(["delete", "get", "head", "post", "put", "patch", "common"], function (n) { delete e.headers[n] }); var r = e.adapter || rr.adapter; return r(e).then(function (n) { return G(e), n.data = J(n.data, n.headers, e.transformResponse), n }, function (n) { return tr(n) || (G(e), n && n.response && (n.response.data = J(n.response.data, n.response.headers, e.transformResponse))), Promise.reject(n) }) } }); var Q = c((Pr, $e) => { "use strict"; var f = d(); $e.exports = function (e, r) { r = r || {}; var s = {}, n = ["url", "method", "data"], a = ["headers", "auth", "proxy", "params"], u = ["baseURL", "transformRequest", "transformResponse", "paramsSerializer", "timeout", "timeoutMessage", "withCredentials", "adapter", "responseType", "xsrfCookieName", "xsrfHeaderName", "onUploadProgress", "onDownloadProgress", "decompress", "maxContentLength", "maxBodyLength", "maxRedirects", "transport", "httpAgent", "httpsAgent", "cancelToken", "socketPath", "responseEncoding"], i = ["validateStatus"]; function l(p, o) { return f.isPlainObject(p) && f.isPlainObject(o) ? f.merge(p, o) : f.isPlainObject(o) ? f.merge({}, o) : f.isArray(o) ? o.slice() : o } function g(p) { f.isUndefined(r[p]) ? f.isUndefined(e[p]) || (s[p] = l(void 0, e[p])) : s[p] = l(e[p], r[p]) } f.forEach(n, function (o) { f.isUndefined(r[o]) || (s[o] = l(void 0, r[o])) }), f.forEach(a, g), f.forEach(u, function (o) { f.isUndefined(r[o]) ? f.isUndefined(e[o]) || (s[o] = l(void 0, e[o])) : s[o] = l(void 0, r[o]) }), f.forEach(i, function (o) { o in r ? s[o] = l(e[o], r[o]) : o in e && (s[o] = l(void 0, e[o])) }); var E = n.concat(a).concat(u).concat(i), m = Object.keys(e).concat(Object.keys(r)).filter(function (o) { return E.indexOf(o) === -1 }); return f.forEach(m, g), s } }); var Ke = c((Br, We) => { "use strict"; var Ie = d(), sr = $(), He = pe(), nr = _e(), O = Q(); function T(t) { this.defaults = t, this.interceptors = { request: new He, response: new He } } T.prototype.request = function (e) { typeof e == "string" ? (e = arguments[1] || {}, e.url = arguments[0]) : e = e || {}, e = O(this.defaults, e), e.method ? e.method = e.method.toLowerCase() : this.defaults.method ? e.method = this.defaults.method.toLowerCase() : e.method = "get"; var r = [nr, void 0], s = Promise.resolve(e); for (this.interceptors.request.forEach(function (a) { r.unshift(a.fulfilled, a.rejected) }), this.interceptors.response.forEach(function (a) { r.push(a.fulfilled, a.rejected) }); r.length;)s = s.then(r.shift(), r.shift()); return s }; T.prototype.getUri = function (e) { return e = O(this.defaults, e), sr(e.url, e.params, e.paramsSerializer).replace(/^\?/, "") }; Ie.forEach(["delete", "get", "head", "options"], function (e) { T.prototype[e] = function (r, s) { return this.request(O(s || {}, { method: e, url: r, data: (s || {}).data })) } }); Ie.forEach(["post", "put", "patch"], function (e) { T.prototype[e] = function (r, s, n) { return this.request(O(n || {}, { method: e, url: r, data: s })) } }); We.exports = T }); var Y = c((zr, Xe) => { "use strict"; function Z(t) { this.message = t } Z.prototype.toString = function () { return "Cancel" + (this.message ? ": " + this.message : "") }; Z.prototype.__CANCEL__ = !0; Xe.exports = Z }); var Je = c((Nr, Ve) => { "use strict"; var ar = Y(); function U(t) { if (typeof t != "function") throw new TypeError("executor must be a function."); var e; this.promise = new Promise(function (n) { e = n }); var r = this; t(function (n) { r.reason || (r.reason = new ar(n), e(r.reason)) }) } U.prototype.throwIfRequested = function () { if (this.reason) throw this.reason }; U.source = function () { var e, r = new U(function (n) { e = n }); return { token: r, cancel: e } }; Ve.exports = U }); var Qe = c((Fr, Ge) => { "use strict"; Ge.exports = function (e) { return function (s) { return e.apply(null, s) } } }); var Ye = c((Dr, Ze) => { "use strict"; Ze.exports = function (e) { return typeof e == "object" && e.isAxiosError === !0 } }); var rt = c((jr, ee) => { "use strict"; var et = d(), ir = F(), P = Ke(), or = Q(), ur = V(); function tt(t) { var e = new P(t), r = ir(P.prototype.request, e); return et.extend(r, P.prototype, e), et.extend(r, e), r } var y = tt(ur); y.Axios = P; y.create = function (e) { return tt(or(y.defaults, e)) }; y.Cancel = Y(); y.CancelToken = Je(); y.isCancel = I(); y.all = function (e) { return Promise.all(e) }; y.spread = Qe(); y.isAxiosError = Ye(); ee.exports = y; ee.exports.default = y }); var te = c((Mr, st) => { st.exports = rt() }); var v = se(te()); var nt = se(te()), B = t => { if (t.substring(0, 4) === "ipfs") return `https://ipfs.zesty.market/ipfs/${t.substring(7)}`; if (t.substring(0, 4) === "http") return t; if (t.substring(0, 5) === "https") return t; if (t.substring(0, 2) === "ar") nt.default.get(`https://arweave.net/${t.substring(5)}`).then(e => e.url).catch(e => { console.error(e) }); else return `https://ipfs.zesty.market/ipfs/${t}` }, b = () => { let t = [{ gateway: "https://cloudflare-ipfs.com", weight: 35 }, { gateway: "https://ipfs.fleek.co", weight: 35 }, { gateway: "https://gateway.pinata.cloud", weight: 20 }, { gateway: "https://dweb.link", weight: 10 }], e = [], r; for (r = 0; r < t.length; r++)e[r] = t[r].weight + (e[r - 1] || 0); let s = Math.random() * e[e.length - 1]; for (r = 0; r < e.length && !(e[r] > s); r++); return t[r].gateway }, lr = () => window.XRHand != null && window.XRMediaBinding != null, at = t => { if (!!t) { if (lr() && t.includes("https://www.oculus.com/experiences/quest/")) { setTimeout(() => { window.open(t, "_blank") }, 1e3); return } window.open(t, "_blank") } }, it = t => t.indexOf("utm_source=") !== -1 || t.indexOf("utm_campaign=") !== -1 || t.indexOf("utm_channel=") !== -1, ot = (t, e) => { let r = new URL(t); return r.searchParams.set("utm_source", "ZestyMarket"), r.searchParams.set("utm_campaign", "ZestyCampaign"), r.searchParams.set("utm_channel", `CampaignId_${e}`), r.href }; var C = { tall: { width: .75, height: 1, style: { standard: `${b()}/ipns/lib.zesty.market/assets/zesty-banner-tall.png`, minimal: `${b()}/ipns/lib.zesty.market/assets/zesty-banner-tall-minimal.png`, transparent: `${b()}/ipns/lib.zesty.market/assets/zesty-banner-tall-transparent.png` } }, wide: { width: 4, height: 1, style: { standard: `${b()}/ipns/lib.zesty.market/assets/zesty-banner-wide.png`, minimal: `${b()}/ipns/lib.zesty.market/assets/zesty-banner-wide-minimal.png`, transparent: `${b()}/ipns/lib.zesty.market/assets/zesty-banner-wide-transparent.png` } }, square: { width: 1, height: 1, style: { standard: `${b()}/ipns/lib.zesty.market/assets/zesty-banner-square.png`, minimal: `${b()}/ipns/lib.zesty.market/assets/zesty-banner-square-minimal.png`, transparent: `${b()}/ipns/lib.zesty.market/assets/zesty-banner-square-transparent.png` } } }, z = "square", ut = "standard"; var lt = "https://beacon.zesty.market", ct = "https://beacon2.zesty.market/zgraphql", cr = { matic: "https://api.thegraph.com/subgraphs/name/zestymarket/zesty-market-graph-matic", polygon: "https://api.thegraph.com/subgraphs/name/zestymarket/zesty-market-graph-matic", rinkeby: "https://api.thegraph.com/subgraphs/name/zestymarket/zesty-market-graph-rinkeby" }, re = { uri: void 0 }, pr = { name: "Default banner", description: "This is the default banner that would be displayed ipsum", image: "https://ipfs.zesty.market/ipfs/QmWBNfP8roDrwz3XQo4qpu9fMxvUSTn8LB7d4JK7ybrfZ2/assets/zesty-ad-square.png", url: "https://www.zesty.market" }, pt = async (t, e, r = "polygon") => {
    let s = Math.floor(Date.now() / 1e3); return v.default.post(cr[r], {
      query: `
      query {
        tokenDatas (
          where: {
            id: "${t}"
            creator: "${e}"
          }
        )
        { 
          sellerNFTSetting {
            sellerAuctions (
              first: 5
              where: {
                contractTimeStart_lte: ${s}
                contractTimeEnd_gte: ${s}
                cancelled: false
              }
            ) {
              id
              buyerCampaigns {
                id
                uri
              }
              buyerCampaignsApproved
            }
          }
          id
        }
      }
    `}).then(n => fr(n)).catch(n => (console.log(n), re))
  }, fr = t => { if (t.status != 200) return re; let r = t.data.data.tokenDatas[0]?.sellerNFTSetting?.sellerAuctions?.find((s, n) => { if (s.buyerCampaigns.length > 0 && s.buyerCampaignsApproved[n]) return s })?.buyerCampaigns[0]; return r ?? re }, ft = async (t, e, r, s, n) => { if (!t) { let a = { uri: "DEFAULT_URI", data: pr }, u = e || z, i = r || ut, l = n || C; return a.data.image = l[u].style[i], a } return v.default.get(B(t)).then(a => (it(a.data.url) || (a.data.url = ot(a.data.url, s)), a.status == 200 ? { uri: t, data: a.data } : null)) }, dt = async t => { try { let e = lt + `/api/v1/space/${t}`; await v.default.put(e), await v.default.post(ct, { query: `mutation { increment(eventType: visits, spaceId: "${t}") { message } }` }, { headers: { "Content-Type": "application/json" } }) } catch (e) { console.log("Failed to emit onload event", e.message) } }, ht = async t => { try { let e = lt + `/api/v1/space/click/${t}`; await v.default.put(e), await v.default.post(ct, { query: `mutation { increment(eventType: clicks, spaceId: "${t}") { message } }` }, { headers: { "Content-Type": "application/json" } }) } catch (e) { console.log("Failed to emit onclick event", e.message) } }; WL.registerComponent("zesty-banner", { creator: { type: WL.Type.String }, space: { type: WL.Type.Int }, network: { type: WL.Type.Enum, values: ["rinkeby", "polygon"], default: "polygon" }, format: { type: WL.Type.Enum, values: Object.keys(C), default: z }, style: { type: WL.Type.Enum, values: ["standard", "minimal", "transparent"], default: "transparent" }, scaleToRatio: { type: WL.Type.Bool, default: !0 }, textureProperty: { type: WL.Type.String, default: "auto" }, beacon: { type: WL.Type.Bool, default: !1 }, dynamicFormats: { type: WL.Type.Bool, default: !0 }, createAutomaticCollision: { type: WL.Type.Bool, default: !0 } }, { init: function () { this.formats = Object.values(C), this.formatKeys = Object.keys(C), this.styleKeys = ["standard", "minimal", "transparent"] }, start: function () { if (this.mesh = this.object.getComponent("mesh"), !this.mesh) throw new Error("'zesty-banner ' missing mesh component"); if (this.createAutomaticCollision && (this.collision = this.object.getComponent("collision") || this.object.addComponent("collision", { collider: WL.Collider.Box, group: 2 }), this.cursorTarget = this.object.getComponent("cursor-target") || this.object.addComponent("cursor-target"), this.cursorTarget.addClickFunction(this.onClick.bind(this))), this.dynamicFormats) { let t = document.createElement("script"); t.onload = () => { this.formatsOverride = zestyFormats.formats, this.startLoading() }, t.setAttribute("src", "https://ipfs.io/ipns/lib.zesty.market/zesty-formats.js"), t.setAttribute("crossorigin", "anonymous"), document.body.appendChild(t) } else this.startLoading() }, startLoading: function () { this.loadBanner(this.space, this.creator, this.network, this.formatKeys[this.format], this.styleKeys[this.style]).then(t => { this.banner = t, this.scaleToRatio && (this.height = this.object.scalingLocal[1], this.object.resetScaling(), this.createAutomaticCollision && (this.collision.extents = [this.formats[this.format].width * this.height, this.height, .1]), this.object.scale([this.formats[this.format].width * this.height, this.height, 1])); let e = this.mesh.material; if (this.textureProperty === "auto") { let r = e.pipeline || e.shader; if (r === "Phong Opaque Textured") e.diffuseTexture = t.texture, e.alphaMaskThreshold = .3; else if (r === "Flat Opaque Textured") e.flatTexture = t.texture, e.alphaMaskThreshold = .8; else throw Error("'zesty-banner ' unable to apply banner texture: unsupported pipeline " + e.shader); this.mesh.material = e } else this.mesh.material[this.textureProperty] = t.texture; this.beacon && dt(this.space) }) }, onClick: function () { this.banner?.url && (WL.xrSession ? WL.xrSession.end().then(this.executeClick.bind(this)) : this.executeClick()) }, executeClick: function () { at(this.banner.url), this.beacon && ht(this.space) }, loadBanner: async function (t, e, r, s, n) { r = r ? "polygon" : "rinkeby"; let a = await pt(t, e, r), u = await ft(a.uri, s, n, t, this.formatsOverride), i = u.data.url; i = i.match(/^http[s]?:\/\//) ? i : "https://" + i, i === "https://www.zesty.market" && (i = `https://app.zesty.market/space/${t}`); let l = u.data.image; return l = l.match(/^.+\.(png|jpe?g)/i) ? l : B(l), WL.textures.load(l, "").then(g => (u.texture = g, u.imageSrc = l, u.url = i, u)) } });
})();
//# sourceMappingURL=zesty-wonderland-sdk.js.map
