var WL=(()=>{var rt=Object.defineProperty;var _t=(a,t)=>{for(var e in t)rt(a,e,{get:t[e],enumerable:!0})};var It={};_t(It,{Alignment:()=>ht,Animation:()=>b,AnimationComponent:()=>Z,AnimationState:()=>pt,Collider:()=>ct,CollisionComponent:()=>T,CollisionEventType:()=>mt,Component:()=>u,ForceMode:()=>D,InputComponent:()=>X,InputType:()=>p,Justification:()=>dt,LightComponent:()=>N,LightType:()=>ut,Material:()=>f,Mesh:()=>J,MeshAttribute:()=>jt,MeshAttributeAccessor:()=>G,MeshComponent:()=>z,MeshIndexType:()=>x,Object:()=>l,PhysXComponent:()=>C,Physics:()=>R,RayHit:()=>U,Scene:()=>V,Shape:()=>j,Skin:()=>H,TextComponent:()=>B,Texture:()=>E,Type:()=>lt,ViewComponent:()=>P,_images:()=>g,_initPhysics:()=>yt,_sceneLoadedCallback:()=>v,arSupported:()=>Q,canvas:()=>Y,init:()=>bt,math:()=>it,onSceneLoaded:()=>xt,onXRSessionEnd:()=>wt,onXRSessionStart:()=>gt,onXRSupported:()=>ft,physics:()=>m,registerComponent:()=>at,scene:()=>$,textures:()=>nt,updateTempMemory:()=>et,vrSupported:()=>K,xrSession:()=>I});var st="Misaligned pointer: please report a bug",M={},k=[],ot=["_id","_manager","type","_type","active"];function at(a,t,e){_WL.registerComponent(a,t,e)}var lt={Bool:1<<1,Int:1<<2,Float:1<<3,String:1<<4,Enum:1<<5,Object:1<<6,Mesh:1<<7,Texture:1<<8,Material:1<<9,Animation:1<<10,Skin:1<<11};var ct={Sphere:0,AxisAlignedBox:1,Box:2};var ht={Left:1,Center:2,Right:3};var dt={Line:1,Middle:2,Top:3};var p={Head:0,EyeLeft:1,EyeRight:2,ControllerLeft:3,ControllerRight:4,RayLeft:5,RayRight:6};var ut={Point:1,Sun:2};var pt={Playing:1,Paused:2,Stopped:3};var D={Force:0,Impulse:1,VelocityChange:2,Acceleration:3};var mt={Touch:0,TouchLost:1,TriggerTouch:2,TriggerTouchLost:3};var j={None:0,Sphere:1,Capsule:2,Box:3,Plane:4,ConvexMesh:5,TriangleMesh:6};var Y=null,I=null,gt=[a=>{I=a}],wt=[()=>{I=null}],ft=[(a,t)=>{a=="ar"&&(Q=t),a=="vr"&&(K=t)}],xt=[],Q,K,$,m,g=[],v=[],s=null,d=0,r=null,A=null,w=null,F=null,q=null;function bt(){$=new V,Y=typeof document=="undefined"?null:document.getElementById("canvas"),M={},k=[],tt(1024)}function yt(){m=new R}function tt(a){console.log("Allocating temp mem:",a),d=a,s&&_free(s),s=_malloc(d),et()}function O(a){d>=a||tt(Math.ceil(a/1024)*1024)}function et(){r=new Float32Array(HEAP8.buffer,s,d>>2),A=new Int32Array(HEAP8.buffer,s,d>>2),w=new Uint32Array(HEAP8.buffer,s,d>>2),F=new Uint16Array(HEAP8.buffer,s,d>>1),q=new Uint8Array(HEAP8.buffer,s,d)}var V=class{constructor(){this._rayHit=_malloc(4*(3*4+3*4+4+2)+4),this._hit=new U(this._rayHit),this.onPreRender=[],this.onPostRender=[]}get activeViews(){let t=_wl_scene_get_active_views(s,16),e=[],n=l._typeIndexFor("view");for(let i=0;i<t;++i)e.push(new P(n,A[i]));return e}rayCast(t,e,n){return _wl_scene_ray_cast(t[0],t[1],t[2],e[0],e[1],e[2],n,this._rayHit),this._hit}addObject(t){let e=t?t.objectId:0,n=_wl_scene_add_object(e);return l._wrapObject(n)}addObjects(t,e,n){let i=e?e.objectId:0;O(t*2);let _=_wl_scene_add_objects(i,t,n||0,s,d>>1),o=F.subarray(0,_);return Array.from(o,l._wrapObject)}reserveObjects(t,e){e=e||{};let n=l._typeIndexFor("js"),i=A.subarray();i.fill(0);for(let _ of Object.entries(e)){let o=l._typeIndexFor(_[0]);i[o<0?n:o]+=_[1]}_wl_scene_reserve_objects(t,s)}set clearColor(t){_wl_scene_set_clearColor(t[0],t[1],t[2],t[3])}load(t){let e=lengthBytesUTF8(t)+1,n=_malloc(e);stringToUTF8(t,n,e),_wl_load_scene(n),_free(n)}append(t){let e=lengthBytesUTF8(t)+1,n=_malloc(e);stringToUTF8(t,n,e);let i=v.length,_=new Promise((o,c)=>{v[i]={success:h=>o(l._wrapObject(h)),error:()=>c()}});return _wl_append_scene(n,i),_free(n),_}};var u=class{constructor(t,e){this._id=e,this._manager=t}get type(){return this._type||l._typeNameFor(this._manager)}get object(){let t=_wl_component_get_object(this._manager,this._id);return l._wrapObject(t)}set active(t){_wl_component_setActive(this._manager,this._id,t)}get active(){return _wl_component_isActive(this._manager,this._id)!=0}destroy(){_wl_component_remove(this._manager,this._id),this._manager=void 0,this._id=void 0}equals(t){return t?this._manager==t._manager&&this._id==t._id:!1}};var T=class extends u{get collider(){return _wl_collision_component_get_collider(this._id)}set collider(t){_wl_collision_component_set_collider(this._id,t)}get extents(){return new Float32Array(HEAPF32.buffer,_wl_collision_component_get_extents(this._id),3)}set extents(t){this.extents.set(t)}get group(){return _wl_collision_component_get_group(this._id)}set group(t){_wl_collision_component_set_group(this._id,t)}queryOverlaps(){let t=_wl_collision_component_query_overlaps(this._id,s,d>>1),e=new Array(t);for(let n=0;n<t;++n)e[n]=new T(this._manager,F[n]);return e}};var B=class extends u{get alignment(){return _wl_text_component_get_alignment(this._id)&7}set alignment(t){_wl_text_component_set_alignment(this._id,this.justification<<3|t)}get justification(){return _wl_text_component_get_alignment(this._id)>>3}set justification(t){_wl_text_component_set_alignment(this._id,t<<3|this.alignment)}get text(){return UTF8ToString(_wl_text_component_get_text(this._id))}set text(t){let e=lengthBytesUTF8(t)+1,n=_malloc(e);stringToUTF8(t,n,e),_wl_text_component_set_text(this._id,n),_free(n)}set material(t){_wl_text_component_set_material(this._id,t?t._index:0)}get material(){return f.wrap(_wl_text_component_get_material(this._id))}};var P=class extends u{get projectionMatrix(){return new Float32Array(HEAPF32.buffer,_wl_view_component_get_projection_matrix(this._id),16)}get near(){return _wl_view_component_get_near(this._id)}set near(t){this.active&&WL.xrSession&&(WL.xrSession.depthNear=t),_wl_view_component_set_near(this._id,t)}get far(){return _wl_view_component_get_far(this._id)}set far(t){this.active&&WL.xrSession&&(WL.xrSession.depthFar=t),_wl_view_component_set_far(this._id,t)}};var X=class extends u{get inputType(){return _wl_input_component_get_type(this._id)}set inputType(t){_wl_input_component_set_type(this._id,t)}get xrInputSource(){if(I){for(let t of I.inputSources)if(t.handedness==this.handedness)return t}return null}get handedness(){let t=this.inputType;return t==p.ControllerRight||t==p.RayRight||t==p.EyeRight?"right":t==p.ControllerLeft||t==p.RayLeft||t==p.EyeLeft?"left":null}};var N=class extends u{get color(){return new Float32Array(HEAPF32.buffer,_wl_light_component_get_color(this._id),4)}get lightType(){return _wl_light_component_get_type(this._id)}set lightType(t){return _wl_light_component_set_type(this._id,t)}};var Z=class extends u{set animation(t){_wl_animation_component_set_animation(this._id,t._index)}get animation(){return new b(_wl_animation_component_get_animation(this._id))}set playCount(t){_wl_animation_component_set_playCount(this._id,t)}get playCount(){return _wl_animation_component_get_playCount(this._id)}set speed(t){_wl_animation_component_set_speed(this._id,t)}get speed(){return _wl_animation_component_get_speed(this._id)}play(){_wl_animation_component_play(this._id)}stop(){_wl_animation_component_stop(this._id)}pause(){_wl_animation_component_pause(this._id)}get state(){return _wl_animation_component_state(this._id)}};var z=class extends u{set material(t){_wl_mesh_component_set_material(this._id,t?t._index:0)}get material(){return f.wrap(_wl_mesh_component_get_material(this._id))}get mesh(){return new J(_wl_mesh_component_get_mesh(this._id))}set mesh(t){_wl_mesh_component_set_mesh(this._id,t._index)}get skin(){return new H(_wl_mesh_component_get_skin(this._id))}set skin(t){_wl_mesh_component_set_skin(this._id,t._index)}};var C=class extends u{set static(t){_wl_physx_component_set_static(this._id,t)}get static(){return!!_wl_physx_component_get_static(this._id)}set kinematic(t){_wl_physx_component_set_kinematic(this._id,t)}get kinematic(){return!!_wl_physx_component_get_kinematic(this._id)}set shape(t){_wl_physx_component_set_shape(this._id,t)}get shape(){return _wl_physx_component_get_shape(this._id)}set shapeData(t){t==null||![j.TriangleMesh,j.ConvexMesh].includes(this.shape)||_wl_physx_component_set_shape_data(this._id,t.index)}get shapeData(){return[j.TriangleMesh,j.ConvexMesh].includes(this.shape)?{index:_wl_physx_component_get_shape_data(this._id)}:null}set extents(t){this.extents.set(t)}get extents(){let t=_wl_physx_component_get_extents(this._id);return new Float32Array(HEAPF32.buffer,t,3)}get staticFriction(){return _wl_physx_component_get_staticFriction(this._id)}set staticFriction(t){_wl_physx_component_set_staticFriction(this._id,t)}get dynamicFriction(){return _wl_physx_component_get_dynamicFriction(this._id)}set dynamicFriction(t){_wl_physx_component_set_dynamicFriction(this._id,t)}get restitution(){return _wl_physx_component_get_restitution(this._id)}set restitution(t){_wl_physx_component_set_restitution(this._id,t)}get linearDamping(){return _wl_physx_component_get_linearDamping(this._id)}set linearDamping(t){_wl_physx_component_set_linearDamping(this._id,t)}get angularDamping(){return _wl_physx_component_get_angularDamping(this._id)}set angularDamping(t){_wl_physx_component_set_angularDamping(this._id,t)}set linearVelocity(t){_wl_physx_component_set_linearVelocity(this._id,t[0],t[1],t[2])}get linearVelocity(){return _wl_physx_component_get_linearVelocity(this._id,s),new Float32Array(HEAPF32.buffer,s,3)}set angularVelocity(t){_wl_physx_component_set_angularVelocity(this._id,t[0],t[1],t[2])}get angularVelocity(){return _wl_physx_component_get_angularVelocity(this._id,s),new Float32Array(HEAPF32.buffer,s,3)}set mass(t){_wl_physx_component_set_mass(this._id,t)}get mass(){return _wl_physx_component_get_mass(this._id)}set massSpaceInteriaTensor(t){_wl_physx_component_set_massSpaceInertiaTensor(this._id,t[0],t[1],t[2])}addForce(t,e,n,i,_){e=e||D.Force,i?_wl_physx_component_addForceAt(this._id,t[0],t[1],t[2],e,!!n,i[0],i[1],i[2],!!_):_wl_physx_component_addForce(this._id,t[0],t[1],t[2],e,!!n)}addTorque(t,e){e=e||D.Force,_wl_physx_component_addTorque(this._id,t[0],t[1],t[2],e)}onCollision(t){return this.onCollisionWith(this,t)}onCollisionWith(t,e){return m._callbacks[this._id]=m._callbacks[this._id]||[],m._callbacks[this._id].push(e),_wl_physx_component_addCallback(this._id,t._id||this._id)}removeCollisionCallback(t){let e=_wl_physx_component_removeCallback(this._id,t);e&&m._callbacks[this._id].splice(-e)}};for(let a of["static","extents","staticFriction","dynamicFriction","restitution","linearDamping","angularDamping","shape","shapeData","kinematic","linearVelocity","angularVelocity","mass"])Object.defineProperty(C.prototype,a,{enumerable:!0});var R=class{constructor(){this._rayHit=_malloc(4*(3*4+3*4+4+2)+4),this._hit=new U(this._rayHit),this._callbacks={}}rayCast(t,e,n,i){return typeof i=="undefined"&&(i=100),_wl_physx_ray_cast(t[0],t[1],t[2],e[0],e[1],e[2],n,i||100,this._rayHit),this._hit}_callCollisionCallback(t,e,n,i){m._callbacks[t][e](n,new C(l._typeIndexFor("physx"),i))}};var J=class{static get VERTEX_FLOAT_SIZE(){return 3+3+2}static get VERTEX_SIZE(){return this.VERTEX_FLOAT_SIZE*4}static get POS(){return{X:0,Y:1,Z:2}}static get TEXCOORD(){return{U:3,V:4}}static get NORMAL(){return{X:5,Y:6,Z:7}}constructor(t){if(typeof t=="object"){if(!t.vertexCount&&t.vertexData&&(t.vertexCount=t.vertexData.length),!t.vertexCount)throw new Error("Missing parameter 'vertexCount'");let e=null,n=0;if(t.indexData){let i=t.indexType||WL.MeshIndexType.UnsignedShort;switch(n=t.indexData.length*i,e=_malloc(n),i){case x.UnsignedByte:HEAPU8.set(t.indexData,e);break;case x.UnsignedShort:HEAPU16.set(t.indexData,e>>1);break;case x.UnsignedInt:HEAPU32.set(t.indexData,e>>2);break}}if(this._index=_wl_mesh_create(e,n,t.indexType,t.vertexCount),t.vertexData){let i=this.attribute(WL.MeshAttribute.Position),_=this.attribute(WL.MeshAttribute.Normal),o=this.attribute(WL.MeshAttribute.TextureCoordinate);for(let c=0;c<t.vertexCount;++c){let h=c*WL.Mesh.VERTEX_FLOAT_SIZE;i.set(c,t.vertexData.subarray(h,h+3)),o.set(c,t.vertexData.subarray(h+3,h+5)),_.set(c,t.vertexData.subarray(h+5,h+8))}}}else this._index=t}get vertexData(){let t=_wl_mesh_get_vertexData(this._index,s);return new Float32Array(HEAPF32.buffer,t,WL.Mesh.VERTEX_FLOAT_SIZE*HEAPU32[s/4])}get vertexCount(){return _wl_mesh_get_vertexCount(this._index)}get indexData(){let t=_wl_mesh_get_indexData(this._index,s,s+4);if(t===null)return null;let e=HEAPU32[s/4];switch(HEAPU32[s/4+1]){case x.UnsignedByte:return new Uint8Array(HEAPU8.buffer,t,e);case x.UnsignedShort:return new Uint16Array(HEAPU16.buffer,t,e);case x.UnsignedInt:return new Uint32Array(HEAPU32.buffer,t,e)}}attribute(t){if(typeof t!="number")throw new TypeError("Expected number, but got "+typeof t);return new G(this._index,t,this.vertexCount)}};var G=class{constructor(t,e,n){_wl_mesh_get_attribute(t,e,s),this._attribute=w[0],this._offset=w[1],this._stride=w[2],this._formatSize=w[3],this._componentCount=w[4],this.length=n}get(t,e){let n=this._componentCount;e=e||new Float32Array(n),O(4*e.length);let i=r.subarray(0,e.length);_wl_mesh_get_attribute_values(this._attribute,this._offset+t*this._stride,this._stride,1,this._formatSize,this._componentCount,i.byteOffset,i.byteLength);for(let _=0;_<e.length;++_)e[_]=i[_];return e}set(t,e){if(e.length%this._componentCount!=0)throw new Error("v.length, "+e.length+", is not a multiple of the attribute vector components, "+this._componentCount);if(e.buffer!=HEAPU8.buffer){O(4*e.length);let n=r.subarray(0,e.length);n.set(e),e=n}_wl_mesh_set_attribute_values(this._attribute,this._offset+t*this._stride,this._stride,e.length/this._componentCount,this._formatSize,this._componentCount,e.byteOffset,e.byteLength)}};var x={UnsignedByte:1,UnsignedShort:2,UnsignedInt:4};var jt={Position:0,Tangent:1,Normal:2,TextureCoordinate:3,Color:4,JointId:5,JointWeight:6,SecondaryJointId:7,SecondaryJointWeight:8};var f=class{constructor(t){this._index=t}get shader(){return UTF8ToString(_wl_material_get_shader(this._index))}clone(){return f.wrap(_wl_material_clone(this._index))}_paramIndex(t){let e=lengthBytesUTF8(t)+1,n=_malloc(e);stringToUTF8(t,n,e);let i=_wl_material_get_param_index(this._index,n);return _free(n),i}_paramType(t){let e=_wl_material_get_param_type(this._index,t);return{type:e&255,componentCount:e>>8&255,metaType:e>>16&255}}static wrap(t){if(t<=0)return null;let e=new f(t);return new Proxy(e,{get(n,i){let _=n._paramIndex(i);if(_!=-1){let o=n._paramType(_);if(_wl_material_get_param_value(n._index,_,s)){if(o.type==0)return o.componentCount==1?w[0]:new Uint32Array(HEAPF32.buffer,s,o.componentCount);if(o.type==1)return o.componentCount==1?A[0]:new Int32Array(HEAPF32.buffer,s,o.componentCount);if(o.type==2)return o.componentCount==1?r[0]:new Float32Array(HEAPF32.buffer,s,o.componentCount);if(o.type==3)return new E(A[0])}throw new Error(`Invalid type ${o} on parameter ${_} for material ${n._index}`)}else return n[i]},set(n,i,_){let o=n._paramIndex(i);if(o>=0)if(_ instanceof E)_wl_material_set_param_value_uint(n._index,o,_._id);else if(typeof _=="number")r[0]=_,_wl_material_set_param_value_float(n._index,o,s,1);else{let c=_.length;for(let h=0;h<c;++h)r[h]=_[h];_wl_material_set_param_value_float(n._index,o,s,c)}else n[i]=_;return!0}})}};var y=null,E=class{constructor(t){if(t instanceof HTMLImageElement||t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement){let e=g.length;g.push(t),this._imageIndex=e,this._id=_wl_renderer_addImage(e)}else this._id=t;nt[this._id]=this}get valid(){return this._id>=0}update(){!this.valid||_wl_renderer_updateImage(this._id,this._imageIndex)}updateSubImage(t,e,n,i){if(!this.valid)return;y||(y=document.createElement("canvas"));let _=g[this._imageIndex];y.width=n,y.height=i,y.getContext("2d").drawImage(_,t,e,n,i,0,0,n,i),g[this._imageIndex]=y;try{_wl_renderer_updateImage(this._id,this._imageIndex,t,(_.videoHeight||_.height)-e-i)}finally{g[this._imageIndex]=_}}destroy(){_wl_texture_destroy(this._id),this._imageIndex&&(g[this._imageIndex]=null,this._imageIndex=void 0)}};var nt={load:function(a,t){let e=new Image;return t!==void 0&&(e.crossOrigin=t),e.src=a,new Promise((n,i)=>{e.onload=function(){let _=new E(e);_.valid||i("Failed to add image "+e.src+" to texture atlas. Probably incompatible format."),n(_)}})}},b=class{constructor(t){this._index=t}get duration(){return _wl_animation_get_duration(this._index)}get trackCount(){return _wl_animation_get_trackCount(this._index)}retarget(t){if(t instanceof H){let i=_wl_animation_retargetToSkin(this._index,t._index);return new b(i)}if(t.length!=this.trackCount)throw Error("Expected "+this.trackCount.toString()+" targets, but got "+t.length.toString());let e=_malloc(2*t.length);for(let i=0;i<t.length;++i)HEAPU16[e>>1+i]=t[i].objectId;let n=_wl_animation_retarget(this._index,e);return _free(e),new b(n)}};var l=class{constructor(t){this.objectId=t}get name(){return UTF8ToString(_wl_object_name(this.objectId))}set name(t){let e=lengthBytesUTF8(t)+1,n=_malloc(e);stringToUTF8(t,n,e),_wl_object_set_name(this.objectId,n),_free(n)}get parent(){let t=_wl_object_parent(this.objectId);return t==0?null:l._wrapObject(t)}get children(){let t=_wl_object_get_children(this.objectId,s,d>>1);if(t==0)return[];let e=new Array(t);for(let n=0;n<t;++n)e[n]=l._wrapObject(F[n]);return e}set parent(t){_wl_object_set_parent(this.objectId,t==null?0:t.objectId)}resetTransform(){_wl_object_reset_translation_rotation(this.objectId),_wl_object_reset_scaling(this.objectId)}resetTranslationRotation(){_wl_object_reset_translation_rotation(this.objectId)}resetRotation(){_wl_object_reset_rotation(this.objectId)}resetTranslation(){_wl_object_reset_translation(this.objectId)}resetScaling(){_wl_object_reset_scaling(this.objectId)}translate(t){_wl_object_translate(this.objectId,t[0],t[1],t[2])}translateObject(t){_wl_object_translate_obj(this.objectId,t[0],t[1],t[2])}translateWorld(t){_wl_object_translate_world(this.objectId,t[0],t[1],t[2])}rotateAxisAngleDeg(t,e){_wl_object_rotate_axis_angle(this.objectId,t[0],t[1],t[2],e)}rotateAxisAngleRad(t,e){_wl_object_rotate_axis_angle_rad(this.objectId,t[0],t[1],t[2],e)}rotateAxisAngleDegObject(t,e){_wl_object_rotate_axis_angle_obj(this.objectId,t[0],t[1],t[2],e)}rotateAxisAngleRadObject(t,e){_wl_object_rotate_axis_angle_rad_obj(this.objectId,t[0],t[1],t[2],e)}rotate(t){_wl_object_rotate_quat(this.objectId,t[0],t[1],t[2],t[3])}rotateObject(t){_wl_object_rotate_quat_obj(this.objectId,t[0],t[1],t[2],t[3])}scale(t){_wl_object_scale(this.objectId,t[0],t[1],t[2])}get transformLocal(){return new Float32Array(HEAPF32.buffer,_wl_object_trans_local(this.objectId),8)}set transformLocal(t){this.transformLocal.set(t),this.setDirty()}getTranslationLocal(t){return _wl_object_get_translation_local(this.objectId,s),t[0]=r[0],t[1]=r[1],t[2]=r[2],t}getTranslationWorld(t){return _wl_object_get_translation_world(this.objectId,s),t[0]=r[0],t[1]=r[1],t[2]=r[2],t}setTranslationLocal(t){_wl_object_set_translation_local(this.objectId,t[0],t[1],t[2])}setTranslationWorld(t){_wl_object_set_translation_world(this.objectId,t[0],t[1],t[2])}get transformWorld(){return new Float32Array(HEAPF32.buffer,_wl_object_trans_world(this.objectId),8)}set transformWorld(t){this.transformWorld.set(t),_wl_object_trans_world_to_local(this.objectId)}get scalingLocal(){return new Float32Array(HEAPF32.buffer,_wl_object_scaling_local(this.objectId),3)}set scalingLocal(t){this.scalingLocal.set(t),this.setDirty()}get scalingWorld(){return new Float32Array(HEAPF32.buffer,_wl_object_scaling_world(this.objectId),3)}set scalingWorld(t){this.scalingWorld.set(t),_wl_object_scaling_world_to_local(this.objectId)}get rotationLocal(){return this.transformLocal.subarray(0,4)}get rotationWorld(){return this.transformWorld.subarray(0,4)}set rotationLocal(t){_wl_object_set_rotation_local(this.objectId,t[0],t[1],t[2],t[3])}set rotationWorld(t){_wl_object_set_rotation_world(this.objectId,t[0],t[1],t[2],t[3])}getForward(t){return t[0]=0,t[1]=0,t[2]=-1,this.transformVectorWorld(t),t}getUp(t){return t[0]=0,t[1]=1,t[2]=0,this.transformVectorWorld(t),t}getRight(t){return t[0]=1,t[1]=0,t[2]=0,this.transformVectorWorld(t),t}transformVectorWorld(t,e){return e=e||t,r[0]=e[0],r[1]=e[1],r[2]=e[2],_wl_object_transformVectorWorld(this.objectId,s),t[0]=r[0],t[1]=r[1],t[2]=r[2],t}transformVectorLocal(t,e){return e=e||t,r[0]=e[0],r[1]=e[1],r[2]=e[2],_wl_object_transformVectorLocal(this.objectId,s),t[0]=r[0],t[1]=r[1],t[2]=r[2],t}transformPointWorld(t,e){return e=e||t,r[0]=e[0],r[1]=e[1],r[2]=e[2],_wl_object_transformPointWorld(this.objectId,s),t[0]=r[0],t[1]=r[1],t[2]=r[2],t}transformPointLocal(t,e){return e=e||t,r[0]=e[0],r[1]=e[1],r[2]=e[2],_wl_object_transformPointLocal(this.objectId,s),t[0]=r[0],t[1]=r[1],t[2]=r[2],t}transformVectorInverseWorld(t,e){return e=e||t,r[0]=e[0],r[1]=e[1],r[2]=e[2],_wl_object_transformVectorInverseWorld(this.objectId,s),t[0]=r[0],t[1]=r[1],t[2]=r[2],t}transformVectorInverseLocal(t,e){return e=e||t,r[0]=e[0],r[1]=e[1],r[2]=e[2],_wl_object_transformVectorInverseLocal(this.objectId,s),t[0]=r[0],t[1]=r[1],t[2]=r[2],t}transformPointInverseWorld(t,e){return e=e||t,r[0]=e[0],r[1]=e[1],r[2]=e[2],_wl_object_transformPointInverseWorld(this.objectId,s),t[0]=r[0],t[1]=r[1],t[2]=r[2],t}transformPointInverseLocal(t,e){return e=e||t,r.set(e),_wl_object_transformPointInverseLocal(this.objectId,s),t[0]=r[0],t[1]=r[1],t[2]=r[2],t}toWorldSpaceTransform(t,e){return e=e||t,r.set(e),_wl_object_toWorldSpaceTransform(this.objectId,s),t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t}toLocalSpaceTransform(t,e){let n=this.parent;return n?n.toObjectSpaceTransform(e):(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7]),t}toObjectSpaceTransform(t,e){return e=e||t,r.set(e),_wl_object_toObjectSpaceTransform(this.objectId,s),t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t}lookAt(t,e=[0,1,0]){_wl_object_lookAt(this.objectId,t[0],t[1],t[2],e[0],e[1],e[2])}destroy(){_wl_scene_remove_object(this.objectId),this.objectId=null}setDirty(){_wl_object_set_dirty(this.objectId)}set active(t){let e=this.getComponents();for(let n of e)n.active=t}getComponent(t,e){let n=lengthBytesUTF8(t)+1,i=_malloc(n);stringToUTF8(t,i,n);let _=_wl_get_component_manager_index(i);if(_<0){let c=_wl_get_js_component_index(this.objectId,i,e||0);return _free(i),c<0?null:_WL._components[c]}_free(i);let o=_wl_get_component_id(this.objectId,_,e||0);return l._wrapComponent(t,_,o)}getComponents(t){let e=t?l._typeIndexFor(t):null,n=[],i=Math.floor(d/3*2),_=_wl_object_get_components(this.objectId,s,i),o=2*_;_wl_object_get_component_types(this.objectId,s+o,i);let c=l._typeIndexFor("js");for(let h=0;h<_;++h){let L=q[h+o],W=F[h];if(L==c){let S=_WL._components[_wl_get_js_component_index_for_id(W)];(e===null||S.type==t)&&n.push(S);continue}if(e===null){let S=l._typeNameFor(L);n.push(l._wrapComponent(S,L,W))}else L==e&&n.push(l._wrapComponent(t,e,W))}return n}addComponent(t,e){let n=l._typeIndexFor(t),i=null,_=null;if(n<0){if(!(t in _WL._componentTypeIndices))throw new TypeError("Unknown component type '"+t+"'");let o=_wl_object_add_js_component(this.objectId,_WL._componentTypeIndices[t]);_=_wl_get_js_component_index_for_id(o),i=_WL._components[_]}else{let o=_wl_object_add_component(this.objectId,n);i=l._wrapComponent(t,n,o)}if(e!==void 0)for(let o in e)ot.includes(o)||(i[o]=e[o]);return n<0&&_wljs_component_init(_),(!e||!("active"in e&&!e.active))&&(i.active=!0),i}equals(t){return t?this.objectId==t.objectId:!1}static _typeIndexFor(t){let e=lengthBytesUTF8(t)+1,n=_malloc(e);stringToUTF8(t,n,e);let i=_wl_get_component_manager_index(n);return _free(n),i}static _typeNameFor(t){return UTF8ToString(_wl_component_manager_name(t))}static _wrapComponent(t,e,n){if(n<0)return null;let i=M[e]||(M[e]=[]);return t=="collision"?i[n]||(i[n]=new T(e,n)):t=="text"?i[n]||(i[n]=new B(e,n)):t=="view"?i[n]||(i[n]=new P(e,n)):t=="mesh"?i[n]||(i[n]=new z(e,n)):t=="input"?i[n]||(i[n]=new X(e,n)):t=="light"?i[n]||(i[n]=new N(e,n)):t=="animation"?i[n]||(i[n]=new Z(e,n)):t=="physx"?i[n]||(i[n]=new C(e,n)):i[n]||(i[n]=new u(e,n))}static _wrapObject(t){let e=k[t]||(k[t]=new l(t));return e.objectId=t,e}},H=class{constructor(t){this._index=t}get jointCount(){return _wl_skin_get_joint_count(this._index)}get jointIds(){return new Uint16Array(HEAPU16.buffer,_wl_skin_joint_ids(this._index),this.jointCount)}get inverseBindTransforms(){return new Float32Array(HEAPF32.buffer,_wl_skin_inverse_bind_transforms(this._index),8*this.jointCount)}get inverseBindScalings(){return new Float32Array(HEAPF32.buffer,_wl_skin_inverse_bind_scalings(this._index),3*this.jointCount)}};var U=class{constructor(t){assert((this._ptr&3)==0,st),this._ptr=t}get locations(){let t=this._ptr,e=[];for(let n=0;n<this.hitCount;++n)e.push(new Float32Array(HEAPF32.buffer,t+12*n,3));return e}get normals(){let t=this._ptr+48,e=[];for(let n=0;n<this.hitCount;++n)e.push(new Float32Array(HEAPF32.buffer,t+12*n,3));return e}get distances(){let t=this._ptr+48*2;return new Float32Array(HEAPF32.buffer,t,this.hitCount)}get objects(){let t=this._ptr+(48*2+16),e=new Uint16Array(HEAPU16.buffer,t,this.hitCount);return[e[0]<=0?null:l._wrapObject(e[0]),e[1]<=0?null:l._wrapObject(e[1]),e[2]<=0?null:l._wrapObject(e[2]),e[3]<=0?null:l._wrapObject(e[3])]}get hitCount(){return Math.min(HEAPU32[this._ptr/4+30],4)}};var it=class{static cubicHermite(t,e,n,i,_,o){r.subarray(0).set(e),r.subarray(4).set(n),r.subarray(8).set(i),r.subarray(12).set(_);let c=e.length==4;return _wl_math_cubicHermite(s+4*16,s+4*0,s+4*4,s+4*8,s+4*12,o,c),t[0]=r[16],t[1]=r[17],t[2]=r[18],c&&(t[3]=r[19]),t}};return It;})();
//# sourceMappingURL=wonderland.min.js.map
